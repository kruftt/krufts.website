(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{116:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>z});var s=i(1834),n=i(4193),a=i(9578),r=i(3115),o=i(3018),h=i(3434),l=i(7343),c=i(8210),d=i(2074);let p=new n.Pq0(0,0,0),u=new l.G({color:0,linewidth:5}),m=new l.G({color:6316128,linewidth:2,opacity:.75,transparent:!0}),f=new l.G({color:6316128,linewidth:2,opacity:.75,transparent:!0}),g=new l.G({color:821107,linewidth:3,opacity:.75,transparent:!0}),w=new l.G({color:821107,linewidth:4,opacity:.75,transparent:!0}),x=new n.V9B({color:821107,side:n.$EB,opacity:.42,transparent:!0}),b=new l.G({color:0xa01752,linewidth:3,opacity:.75,transparent:!0}),v=new l.G({color:0xa01752,linewidth:4,opacity:.75,transparent:!0}),y=new n.V9B({color:0xa01752,side:n.$EB,opacity:.42,transparent:!0});new l.G({color:0,linewidth:1});class j{resize(e){var t;let i=e.domElement,s=Math.min((null==(t=i.parentElement)?void 0:t.clientWidth)||640,640),n=.75*s;i.height!=n&&(e.setSize(s,n,!0),this.controls.target.set(0,.17,0))}setTheta(e){this.theta=e,this.update()}update(){let e=this.theta,t=Math.cos(e),i=Math.sin(e),s=.5*e,a=Math.cos(s),r=Math.sin(s);this.aq_1.set(0,r,0,a),this.aq_2.set(0,-r,0,a),this.ap_1.set(0,r,0),this.ap_2.set(0,-r,0);let o=new n.PTz(0,.70710678,.70710678,0),h=new n.PTz(0,r,0,a);o.premultiply(h),this.q_1.copy(o),o.multiply(h.invert()),this.q_2.copy(o),_(this.q_1,this.p_1),_(this.q_2,this.p_2),this.a_1.update(e,a,r),this.a_2.update(e,t,i),this.vec_0.update(e,0,0),this.vec_1.update(e,a,r),this.vec_2.update(e,0,i),this.arc_1.update(e),this.arc_2.update(e)}constructor(e){let t=this.scene=new n.Z58,i=this.renderer=new a.JeP({canvas:e}),s=this.camera=new n.ubm(67,1.33,.01,4),o=this.controls=new r.N(s,i.domElement);i.setClearAlpha(0),s.position.set(.9,.9,1.2),o.enablePan=!1,o.maxDistance=1.75,o.minDistance=1.75,o.target.y=.17,o.enableZoom=!1,this.resize(i),o.update(),this.theta=0,this.aq_1=new n.PTz(1,0,0,0),this.aq_2=new n.PTz(1,0,0,0),this.ap_1=new n.Pq0(0,0,1),this.ap_2=new n.Pq0(0,0,1),this.a_1=new q(t,g,this.aq_1,this.ap_1,1,"q"),this.a_2=new q(t,b,this.aq_2,this.ap_2,1,"q*"),this.q_0=new n.PTz(0,.70710678,.70710678,0),this.q_1=new n.PTz(0,0,0,0),this.q_2=new n.PTz(0,0,0,0),this.p_0=new n.Pq0(0,.70710678,.70710678),this.p_1=new n.Pq0(0,0,0),this.p_2=new n.Pq0(0,0,0),this.vec_0=new q(t,u,this.q_0,this.p_0,.70710678,"p"),this.vec_1=new q(t,u,this.q_1,this.p_1,.70710678,"qp"),this.vec_2=new q(t,u,this.q_2,this.p_2,.70710678,"qpq⁻\xb9"),this.arc_1=new P(t,this.q_0,this.q_1,w,x),this.arc_2=new P(t,this.q_1,this.q_2,v,y),this.setTheta(Math.PI),i.setAnimationLoop(()=>{this.a_1.render(s),this.a_2.render(s),this.vec_0.render(s),this.vec_1.render(s),this.vec_2.render(s),this.resize(i),i.render(t,s)})}}class q{render(e){this.label&&this.label.lookAt(e.position)}update(e,t,i){this.p_plane.x=this.p.x,this.p_plane.z=this.p.z;let s=this.spiral_axis,n=this.spiral_plane,a,r,o,h=0,l,c,d=-this.q.w/6.2831853,u=this.q.y/119;for(a=0;a<120;a++)r=.05279987647058824*a,l=s[a],c=n[a],o=d*Math.cos(r),h=d*Math.sin(r),c.x=l.x=this.p.x+this.norm*(i*(o-d)-t*h),c.z=l.z=this.p.z+this.norm*(t*(o-d)+i*h),l.y=a*u;this.lines[0].geometry.setFromPoints([p,this.p]),this.lines[1].geometry.setFromPoints(s),this.lines[2].geometry.setFromPoints(n),this.lines[3].geometry.setFromPoints([p,this.p_plane]);let m=this.label;if(m){let e=this.p.length(),t=(e+.12)/(e+1e-7);m.position.set(this.p.x*t,this.p.y*t,this.p.z*t)}}constructor(e,t,i,s,a,r){this.q=i,this.p=s,this.norm=a,this.p_plane=new n.Pq0(0,0,0),this.lines=[new o.X(new h.v,t),new o.X(new h.v,m),new o.X(new h.v,f),new o.X(new h.v,m)],this.spiral_axis=[],this.spiral_plane=[];let l=this.spiral_axis,c=this.spiral_plane;for(let e=0;e<120;e++)l.push(new n.Pq0(0,0,0)),c.push(new n.Pq0(0,0,0));let d=function(e,t){let i=document.createElement("canvas").getContext("2d");if(!i)return;let s="bold ".concat(42,"px sans-serif");i.font=s;let n=i.measureText(t).width+4;return i.canvas.width=n,i.canvas.height=e+4,i.font=s,i.textBaseline="top",i.fillStyle="black",i.fillText(t,2,2),i.canvas}(42,r);if(d){let t=new n.GOR(d);t.minFilter=n.k6q,t.wrapS=n.ghU,t.wrapT=n.ghU;let i=new n.V9B({map:t,transparent:!0});this.label=new n.eaF(new n.bdM(.002*d.width,.002*d.height),i),this.label.renderOrder=1,e.add(this.label)}e.add(...this.lines)}}function _(e,t){t.set(e.x,e.y,e.z)}class P{update(e){let t,i,s=.5*e/119,a=new n.PTz(this.q1.x,this.q1.y,this.q1.z,this.q1.w),r=new n.PTz(0,Math.sin(s),0,Math.cos(s)),o=!1;0!=a.w&&(r.y=-r.y,o=!0),_(a,i=this.points[0]),o?a.multiply(r):a.premultiply(r);for(let e=0;e<119;e++)t=this.points[e],_(a,i=this.points[e+1]),this.faces[3*e+1].set(t.x,0,t.z),this.faces[3*e+2].set(i.x,0,i.z),o?a.multiply(r):a.premultiply(r);this.line.geometry.setFromPoints(this.points),this.region.geometry.setFromPoints(this.faces)}constructor(e,t,i,s,a){this.q1=t,this.q2=i,this.line=new o.X(new h.v,s),this.points=[],this.faces=[];for(let e=0;e<119;e++)this.points.push(new n.Pq0(0,0,0)),this.faces.push(p,new n.Pq0(0,0,0),new n.Pq0(0,0,0));this.points.push(new n.Pq0(0,0,0)),this.region=new n.eaF(new n.LoY,a),this.region.renderOrder=1,e.add(this.line),e.add(this.region)}}function T(){let e=(0,c.useRef)(null),t=(0,c.useRef)(null);return(0,c.useEffect)(()=>{t.current=new j(e.current)}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("canvas",{className:"m-auto",ref:e}),(0,s.jsx)(d.A,{children:"q = \\cos{\\theta} + \\hat{q}\\sin{\\theta}"}),(0,s.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,s.jsx)("span",{className:"font-bold text-2xl",children:"-2π"}),(0,s.jsx)("input",{type:"range",min:-6.2831853,step:6.2831853/120,max:6.2831853+.001,defaultValue:Math.PI,onChange:function(e){let i=parseFloat(e.target.value);t.current.setTheta(i)},className:"grow max-w-150"}),(0,s.jsx)("span",{className:"font-bold text-2xl",children:"2π"})]})]})}var k=i(7149),A=i(2556),N=i(193);function z(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)(k.it,{children:["Picture This!","Let's Do The Twist"]}),(0,s.jsxs)("p",{children:["We can visualize the rotation of ",(0,s.jsx)(A.A,{children:"p"})," by ",(0,s.jsx)(A.A,{children:"q"})," by picturing a twisting action along the axis of rotation. As the parallel components of ",(0,s.jsx)(A.A,{children:"p"})," are twisted, they maintain their overall length. In this way, we can picture quaternions rotating points in 3d, enriched by our understanding of the algebra and conjugation:"]}),(0,s.jsx)(T,{}),(0,s.jsxs)("p",{children:["Notice how the point ",(0,s.jsx)(A.A,{children:"p"}),' first appears as a "pure" quaternion with no real component before being multiplied by ',(0,s.jsx)(A.A,{children:"q"})," on the left. The intermediate product ",(0,s.jsx)(A.A,{children:"qp"})," breaks up the parallel component such that it can no longer be directly interpreted as a simple component in 3d space, but rather has an additional twist. Then, after completing the conjugation, the twist cancels out and we are free to interpret ",(0,s.jsx)(A.A,{children:"p'"})," as a normal point again. The ability to move back and forth between interpretations depends on conjugation cancelling out the twist."]}),(0,s.jsxs)(k.it,{children:["Vector Operations","Cross Your p's and Dot Your q's"]}),(0,s.jsxs)("p",{children:["Notice what happens to the intermediate term, ",(0,s.jsx)(A.A,{children:"qp"}),", when the angle is ",(0,s.jsx)(A.A,{children:"\\pi"}),". (Reloading the page sets ",(0,s.jsx)(A.A,{children:"\\theta"})," to ",(0,s.jsx)(A.A,{children:"\\pi"}),") The component parallel to the axis collapses entirely into a twist. Just like in the case of 2-D, a quarter turn captures the purely rotational behavior, i.e. a shift of one direction entirely into another. This is quite useful because it tells us the length of the component of ",(0,s.jsx)(A.A,{children:"p"})," that was parallel to ",(0,s.jsx)(A.A,{children:"q"}),' without it being mixed up with the orthogonal component. ("orthogonal" means "right angle", coming from  "rectus" meaning roughly "standing up straight") Similarly, the vector part of ',(0,s.jsx)(A.A,{children:"qp"})," is nothing more than the component of ",(0,s.jsx)(A.A,{children:"p"})," that was orthogonal to ",(0,s.jsx)(A.A,{children:"q"})," to begin with, but rotated exactly a quarter turn such that it ends up orthogonal to both."]}),(0,s.jsxs)("p",{children:["The twisted/real part is called (the negative of) the dot product, ",(0,s.jsx)(A.A,{children:"- p \\cdot q"}),", while the vector part is the cross product, ",(0,s.jsx)(A.A,{children:"p \\times q"}),". These terms are so useful in and of themselves that they were separated out from the quaternion algebra and put to work as independent operations in vector and matrix calculus, partially to avoid the necessity of conjugation. Their utility comes from the fact that they can be used independently to compute and manipulate these components as desired, but this utility comes at the cost of having the potential to obscure relationships that are more apparent within the quaternion algebra presented as a whole."]}),(0,s.jsxs)(k.it,{children:["Paired Composition","The Algebraic Tag Team"]}),(0,s.jsx)("p",{children:"We've demonstrated how points, temporarily represented as quaternions, can be rotated by conjugation, but how do we rotate rotations themselves? It turns out this is already in our picture! Consider what happens if we were to apply a second rotation, i.e. to conjugate the first versor with a second:"}),(0,s.jsxs)(d.A,{inline:!0,children:["q_{2}(q_{1}(p)q_{1}^{'})q_{2}^{'}","(q_{2}q_{1})(p)(q_{1}^{'}q_{2}^{'})"]}),(0,s.jsxs)("p",{children:["By re-associating the multiplications, we see that the composed rotation is nothing more than the product of two quaternions. Yet this is exactly what is represented, twice, in the visualization above! Its just that the quaternions ",(0,s.jsx)(A.A,{children:"p"})," and ",(0,s.jsx)(A.A,{children:"p'"}),", which started as regular 3D points, are guaranteed to be pure (and thereby represent quarter-turn rotations by default), but we can still see all the components of action involved in multiplying one quaternion by another by looking at the intermediate term ",(0,s.jsx)(A.A,{children:"qp"}),"."]}),(0,s.jsxs)("p",{children:["A bit of a sleight of hand has occurred in this whole overarching approach, and its not unreasonable e.g. to worry that we are somehow overloading the meaning of the real component. On the one hand, we are saying that as a position it signifies a ",(0,s.jsx)("i",{children:"twist"}),", and on the other hand, as an action it signifies ",(0,s.jsx)("i",{children:"stay"}),". How we interpret it depends on whether or not the component is appearing as part of the rotation of a point or as part of the composition of two rotations. Furthermore, our imaginary vectors themselves seem to be performing double duty, both as axes and planes of rotation! It is up to us to keep the picture and the meaning of these operations clear."]}),(0,s.jsxs)("p",{children:['Toward that end, lets briefly look at what\'s called the "geometric algebra". In geometric algebra, there is indeed a difference between the ',(0,s.jsx)("i",{children:"stay-in-place"})," and ",(0,s.jsx)("i",{children:"twist"})," behaviors that is not explicit in the quaternion algebra alone. In fact, they are different types of objects. When composing rotations, the only terms involved are those of the even subalgebra, in 0 or 2 dimensions. These are the scalars and bivectors, meaning ",(0,s.jsx)("i",{children:"stay-in-place/reflect"})," and ",(0,s.jsx)("i",{children:"rotate"})," respectively. However, when rotating a point, the odd sub-algebra, with 1 and 3 dimensions, is involved, and the intermediate term in the conjugation that results from ",(0,s.jsx)("i",{children:"rotating in place"}),' is an oriented volume rather than a scalar. Once this oriented volume is "wound into being" it can be "unwound" along any axis. I.e. its not necessarily aligned to any particular direction or plane of rotation. This detail, however, is irrelevant in the context of rotating 3d points, in which multiplication always occurs in the context of a conjugation.']}),(0,s.jsx)(N.A,{src:"quats/subalgebras.png",className:"max-h-120 m-auto",alt:"Geometric subalgebras."}),(0,s.jsxs)("p",{children:["When switching our interpretation of quaternions betweem rotations and positions, what we are doing in terms of the geometric algebra is switching between ",(0,s.jsx)("i",{children:"dual"}),' subspaces. That is to say, the axis of rotation is in a dual subspace to the plane of rotation, where together they fill the entirety of 3D. Similarly, the "twisted" oriented volume component forms a dual subspace with the scalar component, together "filling" 3D space. The quaternion variables are able to carry these complementary meanings, provided that we rotate positions using conjugation (such that the twist cancels out) and generally take care that we are skillfully applying our interpretations.']}),(0,s.jsx)(k.it,{children:"The End"}),(0,s.jsxs)("p",{children:["I hope you enjoyed exploring these wonderful mathematical objects with me. If you have comments, critiques, or suggestions please feel free to ",(0,s.jsx)("a",{className:"text-teal-700 font-bold",href:"mailto:kruft.webmaster@gmail.com",children:"send me an email"}),"!"]})]})}},193:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var s=i(1834);function n(e){let{src:t,className:i,alt:n,id:a}=e;return(0,s.jsx)("img",{src:"https://cdn.jsdelivr.net/gh/kruftt/krufts.website@images/"+t,className:i,alt:n,id:a})}},1823:(e,t,i)=>{"use strict";i.d(t,{cn:()=>a});var s=i(9850),n=i(6576);function a(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,n.QP)((0,s.$)(t))}},2074:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(1834);let n=(0,i(6145).default)(()=>i.e(325).then(i.bind(i,5325)).then(e=>e.MathJax),{loadableGenerated:{webpack:()=>[5325]},ssr:!1});function a(e){let{children:t,inline:i=!0}=e;t instanceof Array||(t=[t]);let a=t.map((e,t)=>i?(0,s.jsx)("span",{children:"\\("+e+"\\)"},t):(0,s.jsx)("span",{children:"\\["+e+"\\]"},t));return(0,s.jsx)(n,{className:"mt-4 mb-6",inline:!1,children:(0,s.jsx)("div",{className:"flex flex-col items-center",children:a})})}},2556:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(1834);let n=(0,i(6145).default)(()=>i.e(325).then(i.bind(i,5325)).then(e=>e.MathJax),{loadableGenerated:{webpack:()=>[5325]},ssr:!1});function a(e){let{className:t,children:i,dynamic:a}=e;return(0,s.jsx)(n,{inline:!0,dynamic:a,className:t,children:"\\("+i+"\\)"})}},3440:(e,t,i)=>{"use strict";i.d(t,{$:()=>h});var s=i(1834);i(8210);var n=i(6306),a=i(9132),r=i(1823);let o=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function h(e){let{className:t,variant:i,size:a,asChild:h=!1,...l}=e,c=h?n.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,r.cn)(o({variant:i,size:a,className:t})),...l})}},4471:(e,t,i)=>{Promise.resolve().then(i.bind(i,116))},7149:(e,t,i)=>{"use strict";i.d(t,{hn:()=>d,it:()=>c,Kg:()=>l});var s=i(1834),n=i(1823),a=i(3440);function r(){return(0,s.jsx)(a.$,{onClick:()=>window.open("https://buymeacoffee.com/kruft"),className:(0,n.cn)("border hover:border-gray-300 active:border-gray-400","hover:bg-white active:bg-white","bg-[url(/img/bmc-button.svg)] bg-cover","w-42 h-12 mt-12"),variant:"default"})}var o=i(8210);function h(e){let{children:t,href:i,selected:a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("pl-3 pr-3 rounded-md",a?"border border-gray-300 bg-white":""),children:(0,s.jsx)("a",{href:i,children:t})})}function l(e){let{className:t,header:i=!1,selected:a="none"}=e;return(0,s.jsxs)("div",{className:(0,n.cn)("flex flex-col items-center",t),children:[i&&(0,s.jsx)("h1",{className:"pl-3 pr-3 rounded-md text-3xl mb-8",children:"Quaternions From Scratch"}),(0,s.jsxs)("div",{className:"flex gap-6 justify-center",children:[(0,s.jsx)(h,{href:"/articles/quats-from-scratch/",selected:""==a,children:"Intro"}),(0,s.jsx)(h,{href:"/articles/quats-from-scratch/0",selected:"0"==a,children:"0"}),(0,s.jsx)(h,{href:"/articles/quats-from-scratch/1",selected:"1"==a,children:"1"}),(0,s.jsx)(h,{href:"/articles/quats-from-scratch/2",selected:"2"==a,children:"2"}),(0,s.jsx)(h,{href:"/articles/quats-from-scratch/3",selected:"3"==a,children:"3"}),(0,s.jsx)(h,{href:"/articles/quats-from-scratch/4",selected:"4"==a,children:"4"})]}),!i&&(0,s.jsx)(r,{})]})}function c(e){let t,i,{children:n}=e;return"string"==typeof n?(t=n,i=!1):[t,i]=n,(0,s.jsxs)("div",{className:"mt-10 mb-6",children:[(0,s.jsx)("h2",{className:"text-center m-auto text-3xl",children:t}),(0,s.jsx)("h3",{className:"text-center m-auto text-l mt-1",children:(0,s.jsx)("i",{children:i})})]})}function d(e){let{children:t}=e,i=(0,o.useRef)(null),n=(0,o.useRef)(null),a=(0,o.useRef)(!1);return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"relative",ref:i,children:t})}),(0,s.jsx)("button",{className:"w-10 h-10 text-2xl rounded-full border-2 border-gray-400 text-gray-800 p-1 pb-0 mb-[1em] bg-gray-100 hover:border-gray-600",onClick:function(){let e,t=i.current.children,s=n.current,r=n.current.children[0];if(a.current)for(e of(s.classList.remove("bg-white"),s.classList.add("bg-gray-100"),r.classList.remove("top-[-0.1em]","left-[0.1em]"),r.classList.add("bottom-[0.18em]","left-[0.03em]"),r.innerText="⏸︎",t))e.style.animationPlayState="running";else for(e of(s.classList.remove("bg-gray-100"),s.classList.add("bg-white"),r.classList.remove("bottom-[0.18em]","left-[0.03em]"),r.classList.add("top-[-0.1em]","left-[0.1em]"),r.innerText="▶︎",t))e.style.animationPlayState="paused";a.current=!a.current},ref:n,children:(0,s.jsx)("span",{className:"relative bottom-[0.18em] left-[0.03em]",children:"⏸︎"})})]})}}},e=>{e.O(0,[769,154,228,144,738,30,358],()=>e(e.s=4471)),_N_E=e.O()}]);